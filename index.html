<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dynamic Gallery with Thumbnails</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    h1 {
      font-size: 1.5em;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
    .gallery-item {
      width: 160px;
      border: 1px solid #ccc;
      padding: 5px;
      background: #fff;
      text-align: center;
    }
    .gallery-item img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto 4px;
    }
    a.folder-link {
      display: inline-block;
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <h1>Dynamic Gallery of core-assets</h1>
  <div id="gallery" class="gallery"></div>

  <script>
    const username = 'stustustudio';
    const repo = 'higher';
    const path = 'media/core-assets';

    async function fetchFiles(folder) {
      const res = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${folder}`);
      return await res.json();
    }

    function displayFiles(files) {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = ''; // Clear existing
      files.forEach(file => {
        if (file.type === "file" && /\.(jpe?g|png|gif|webp|svg)$/i.test(file.name)) {
          const item = document.createElement('div');
          item.className = 'gallery-item';
          item.innerHTML = `
            <img src="${file.download_url}" alt="${file.name}">
            <div>${file.name}</div>
          `;
          gallery.appendChild(item);
        } else if (file.type === "dir") {
          const link = document.createElement('a');
          link.href = `?folder=${file.path}`;
          link.textContent = 'üìÅ ' + file.name;
          link.className = 'folder-link';
          gallery.appendChild(link);
        }
      });
    }

    async function loadGallery() {
      const params = new URLSearchParams(window.location.search);
      const folder = params.get('folder') || path;
      const files = await fetchFiles(folder);
      displayFiles(files);
    }

    loadGallery();
  </script>
</body>
</html>
